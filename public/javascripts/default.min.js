function rambler(t,i,n){return ticketManager.hallPlanV2(t,i,n),!1}$(function(){function t(t){return t==T?"любая":t+" руб."}function i(t,i){"undefined"==typeof i&&(i=1e3),t.addClass("hidden")}function n(t,i){"undefined"==typeof i&&(i=1e3),t.removeClass("hidden")}function e(t,i){"undefined"==typeof i&&(i=1e3),t.toggleClass("hidden")}function r(){$("td.cell-screenings").each(function(){a($(this))||o($(this))?i($(this)):n($(this))}),$("tr.row-entity").each(function(){0==$(this).find("td.cell-screenings").not(".hidden").size()?i($(this)):n($(this))}),$(".header-day").each(function(){0==$(this).next("table").find("tr.row-entity").not(".hidden").size()?(i($(this)),i($(this).next("table"))):(n($(this)),n($(this).next("table")))}),0==$(".header-day").not(".hidden").size()?n($("#nothing-found")):i($("#nothing-found"))}function a(t){return price=t.attr("attr-price"),(price>x||"undefined"==typeof price)&&T>x}function o(t){return time=t.attr("attr-time-of-day"),!("all-day"==C||time==C)}function s(t){var i=["#button-trailer-original","#button-trailer-dubbed"];i.forEach(function(t){$(t).removeClass("active")}),$(t).addClass("active")}function l(t){$(t).find('iframe[src="about:blank"]').prop("src",function(){return $(this).data("src")})}function u(t){var i=["#button-sort-title","#button-sort-date","#button-sort-imdb","#button-sort-kinopoisk","#button-sort-screenings","#button-sort-next-screening","#button-sort-language"];i.forEach(function(t){$(t).removeClass("active")}),$(t).addClass("active")}function c(t,i,n){u(t),buttonSortPressedPrev=P,P=i,P!=buttonSortPressedPrev&&$("#movie-plates .movie-plate").sort(n).appendTo("#movie-plates"),y()}function d(t){var i=["#button-morning","#button-day","#button-evening","#button-all-day"];i.forEach(function(t){$(t).removeClass("active")}),$(t).addClass("active")}function f(t,i){d(t),buttonFilterPressedPrev=C,C=i,C!=buttonFilterPressedPrev&&r()}function v(t,i){var n=["attr-imdb","attr-kinopoisk"],e=parseFloat($(t).attr(n[0])),r=parseFloat($(i).attr(n[0]));return e==r&&(e=parseFloat($(t).attr(n[1])),r=parseFloat($(i).attr(n[1]))),e>r?-1:1}function b(t,i){var n=["attr-kinopoisk","attr-imdb"],e=parseFloat($(t).attr(n[0])),r=parseFloat($(i).attr(n[0]));return e==r&&(e=parseFloat($(t).attr(n[1])),r=parseFloat($(i).attr(n[1]))),e>r?-1:1}function h(t,i){var n=["attr-created"],e=parseInt($(t).attr(n[0])),r=parseInt($(i).attr(n[0]));return e>r?-1:1}function p(t,i){var n=["attr-language"],e=$(t).attr(n[0]).toLowerCase(),r=$(i).attr(n[0]).toLowerCase();return e?r?e==r?g(t,i):r>e?-1:1:-1:1}function g(t,i){var n=["attr-title"],e=$(t).attr(n[0]).toLowerCase(),r=$(i).attr(n[0]).toLowerCase();return r>e?-1:1}function m(t,i){var n=["attr-next-screening"],e=parseInt($(t).attr(n[0])),r=parseInt($(i).attr(n[0]));return r>e?-1:1}function k(t,i){var n=["attr-screenings"],e=parseInt($(t).attr(n[0])),r=parseInt($(i).attr(n[0]));return e>r?-1:1}function w(){$("a.price-button:not(.disabled)").each(function(){timestamp=parseInt($(this).parent().attr("attr-time")),current=(new Date).getTime()/1e3,!isNaN(timestamp)&&1800>timestamp-current&&$(this).addClass("disabled")})}function y(){$(window).scrollTop($(window).scrollTop()+1),$(window).scrollTop($(window).scrollTop()-1)}var C,x,P,I,F=100,T=600,L=50,S="#price-slider";$(S).slider({value:T,min:F,max:T,step:L,slide:function(i,n){$("#ticket-price").text(t(n.value))},change:function(i,n){$("#ticket-price").text(t(n.value)),priceSliderValuePrev=x,x=n.value,priceSliderValuePrev!=x&&r()}}),$("#button-trailer-original").click(function(){$("#trailer-original").show(),$("#trailer-dubbed").hide(),$("#button-trailer-original").addClass("active"),$("#button-trailer-dubbed").removeClass("active"),l($("#trailer-dubbed"))}),$("#button-trailer-dubbed").click(function(){$("#trailer-dubbed").show(),$("#trailer-original").hide(),$("#button-trailer-dubbed").addClass("active"),$("#button-trailer-original").removeClass("active"),l($("#trailer-dubbed"))}),$("#button-sort-title").click(function(){c(this,"sort-title",g)}),$("#button-sort-date").click(function(){c(this,"sort-date",h)}),$("#button-sort-imdb").click(function(){c(this,"sort-imdb",v)}),$("#button-sort-kinopoisk").click(function(){c(this,"sort-kinopoisk",b)}),$("#button-sort-next-screening").click(function(){c(this,"sort-next-screening",m)}),$("#button-sort-screenings").click(function(){c(this,"sort-screenings",k)}),$("#button-sort-language").click(function(){c(this,"sort-language",p)}),$("#button-morning").click(function(){f(this,"morning")}),$("#button-day").click(function(){f(this,"day")}),$("#button-evening").click(function(){f(this,"evening")}),$("#button-all-day").click(function(){f(this,"all-day")}),$("button.show-button").click(function(){var t=$(this).closest(".movie-plate-table").next("div").find("table");e(t),t.find("img:first").unveil(0);var i=$(this).children(":first");i.toggleClass("fa-plus"),i.toggleClass("fa-minus")}),$("#button-movies").click(function(){$("#tab-movies").show(),$("#tab-screenings").hide(),$("#button-movies").addClass("active"),$("#button-screenings").removeClass("active")}),$("#button-screenings").click(function(){$("#tab-screenings").show(),$("#tab-movies").hide(),$("#button-screenings").addClass("active"),$("#button-movies").removeClass("active")}),$(document).ready(function(){d($("#button-all-day")),C="all-day",x=T,$(S).slider("value",T),s($("#button-trailer-original")),I="trailer-original",$("#button-group-trailers").show(),l($("#trailer-original")),$("#trailer-original").show(),$("#trailers").show(),$("#filters").show(),w(),window.setInterval(function(){w()},12e4),$("#button-screenings").addClass("active"),$(".movie-poster-mobile img.poster").unveil(300),y(),$("#button-sort-imdb").click()})});